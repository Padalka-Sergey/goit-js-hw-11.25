{"version":3,"file":"index.js","sources":["../src/js/image-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '31316386-df3d7a07dab36b9800dfb8d2b';\nconst PARAMS =\n  '&image_type=photo&orientation=horisontal&savesearch=true&per_page=40';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n\nfunction fetchFotos(query, page) {\n  return axios\n    .get(`?key=${API_KEY}&q=${query}${PARAMS}&page=${page}`)\n    .then(({ data }) => data);\n}\n\nexport { fetchFotos };\n","import { fetchFotos } from './image-api';\n\nconst refForm = document.querySelector('#search-form');\nconst refGallery = document.querySelector('.gallery');\nconst refLoadMore = document.querySelector('.load-more');\nlet searchQuery = null;\nlet page = 1;\n\nrefForm.addEventListener('submit', onSubmit);\nrefLoadMore.addEventListener('click', onClckloadMore);\n\nfunction onSubmit(evt) {\n  evt.preventDefault();\n  const form = evt.target;\n  searchQuery = form.elements.searchQuery.value;\n  page = 1;\n\n  delMarkup();\n  delLoadMore();\n\n  if (searchQuery === '') {\n    Notiflix.Notify.failure('Please fill in all the fields!');\n    return;\n  }\n\n  fetchFotos(searchQuery, page)\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        Notiflix.Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        return;\n      }\n\n      showLoadMore(hits, totalHits, page);\n      makeMarkup(hits);\n      page += 1;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nfunction onClckloadMore() {\n  fetchFotos(searchQuery, page)\n    .then(({ hits, totalHits }) => {\n      showLoadMore(hits, totalHits, page);\n      makeMarkup(hits);\n      page += 1;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nfunction makeMarkup(dataResp) {\n  const markup = dataResp\n    .map(\n      dataEl => `<div class=\"photo-card\">\n  <img src=${dataEl.webformatURL} alt=${dataEl.tags} loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes</b> ${dataEl.likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views</b> ${dataEl.views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments</b> ${dataEl.comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads</b> ${dataEl.downloads}\n    </p>\n  </div>\n</div>`\n    )\n    .join('');\n  refGallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showLoadMore(hits, totalHits, page) {\n  if (hits.length % 40 === 0 && hits.length * page < totalHits) {\n    return refLoadMore.classList.add('load-more-visible');\n  }\n  refLoadMore.classList.remove('load-more-visible');\n\n  Notiflix.Notify.failure(\n    \"We're sorry, but you've reached the end of search results.\"\n  );\n}\n\nfunction delMarkup() {\n  refGallery.innerHTML = '';\n}\n\nfunction delLoadMore() {\n  if (refLoadMore.classList.contains('load-more-visible')) {\n    refLoadMore.classList.remove('load-more-visible');\n  }\n}\n"],"names":["API_KEY","PARAMS","axios","fetchFotos","query","page","data","refForm","refGallery","refLoadMore","searchQuery","onSubmit","onClckloadMore","evt","delMarkup","delLoadMore","hits","totalHits","showLoadMore","makeMarkup","error","dataResp","markup","dataEl"],"mappings":"svBAEA,MAAMA,EAAU,qCACVC,EACJ,uEACFC,EAAM,SAAS,QAAU,2BACzBA,EAAM,SAAS,QAAQ,KAAK,cAAc,EAAI,mBAE9C,SAASC,EAAWC,EAAOC,EAAM,CAC/B,OAAOH,EACJ,IAAI,QAAQF,CAAO,MAAMI,CAAK,GAAGH,CAAM,SAASI,CAAI,EAAE,EACtD,KAAK,CAAC,CAAE,KAAAC,CAAM,IAAKA,CAAI,CAC5B,CCVA,MAAMC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EAAc,KACdL,EAAO,EAEXE,EAAQ,iBAAiB,SAAUI,CAAQ,EAC3CF,EAAY,iBAAiB,QAASG,CAAc,EAEpD,SAASD,EAASE,EAAK,CASrB,GARAA,EAAI,eAAc,EAElBH,EADaG,EAAI,OACE,SAAS,YAAY,MACxCR,EAAO,EAEPS,IACAC,IAEIL,IAAgB,GAAI,CACtB,SAAS,OAAO,QAAQ,gCAAgC,EACxD,MACD,CAEDP,EAAWO,EAAaL,CAAI,EACzB,KAAK,CAAC,CAAE,KAAAW,EAAM,UAAAC,KAAgB,CAC7B,GAAID,EAAK,SAAW,EAAG,CACrB,SAAS,OAAO,QACd,0EACV,EACQ,MACD,CAEDE,EAAaF,EAAMC,EAAWZ,CAAI,EAClCc,EAAWH,CAAI,EACfX,GAAQ,CACd,CAAK,EACA,MAAMe,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CAEA,SAASR,GAAiB,CACxBT,EAAWO,EAAaL,CAAI,EACzB,KAAK,CAAC,CAAE,KAAAW,EAAM,UAAAC,KAAgB,CAC7BC,EAAaF,EAAMC,EAAWZ,CAAI,EAClCc,EAAWH,CAAI,EACfX,GAAQ,CACd,CAAK,EACA,MAAMe,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CAEA,SAASD,EAAWE,EAAU,CAC5B,MAAMC,EAASD,EACZ,IACCE,GAAU;AAAA,aACHA,EAAO,YAAY,QAAQA,EAAO,IAAI;AAAA;AAAA;AAAA,qBAG9BA,EAAO,KAAK;AAAA;AAAA;AAAA,qBAGZA,EAAO,KAAK;AAAA;AAAA;AAAA,wBAGTA,EAAO,QAAQ;AAAA;AAAA;AAAA,yBAGdA,EAAO,SAAS;AAAA;AAAA;AAAA,OAIpC,EACA,KAAK,EAAE,EACVf,EAAW,mBAAmB,YAAac,CAAM,CACnD,CAEA,SAASJ,EAAaF,EAAMC,EAAWZ,EAAM,CAC3C,GAAIW,EAAK,OAAS,KAAO,GAAKA,EAAK,OAASX,EAAOY,EACjD,OAAOR,EAAY,UAAU,IAAI,mBAAmB,EAEtDA,EAAY,UAAU,OAAO,mBAAmB,EAEhD,SAAS,OAAO,QACd,4DACJ,CACA,CAEA,SAASK,GAAY,CACnBN,EAAW,UAAY,EACzB,CAEA,SAASO,GAAc,CACjBN,EAAY,UAAU,SAAS,mBAAmB,GACpDA,EAAY,UAAU,OAAO,mBAAmB,CAEpD"}