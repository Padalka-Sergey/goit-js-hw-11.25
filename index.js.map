{"version":3,"file":"index.js","sources":["../src/js/image-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '31316386-df3d7a07dab36b9800dfb8d2b';\nconst PARAMS =\n  '&image_type=photo&orientation=horisontal&savesearch=true&per_page=40';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n\nfunction fetchFotos(query, page) {\n  return axios\n    .get(`?key=${API_KEY}&q=${query}${PARAMS}&page=${page}`)\n    .then(({ data }) => data);\n}\n\nexport { fetchFotos };\n","import { fetchFotos } from './image-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refForm = document.querySelector('#search-form');\nconst refGallery = document.querySelector('.gallery');\nconst refLoadMore = document.querySelector('.load-more');\n\nlet searchQuery = null;\nlet page = 1;\nlet gallery = null;\n\nrefForm.addEventListener('submit', onSubmit);\nrefLoadMore.addEventListener('click', onClckloadMore);\nrefGallery.addEventListener('click', onClckLinkImg);\n\nfunction onSubmit(evt) {\n  evt.preventDefault();\n  const form = evt.target;\n  searchQuery = form.elements.searchQuery.value;\n  page = 1;\n\n  delMarkup();\n  delLoadMore();\n\n  if (searchQuery === '') {\n    Notiflix.Notify.failure('Please fill in all the fields!');\n    return;\n  }\n\n  fetchFotos(searchQuery, page)\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        Notiflix.Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        return;\n      }\n\n      showLoadMore(hits, totalHits, page);\n      makeMarkup(hits);\n\n      page += 1;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nfunction onClckloadMore() {\n  fetchFotos(searchQuery, page)\n    .then(({ hits, totalHits }) => {\n      showLoadMore(hits, totalHits, page);\n      makeMarkup(hits);\n      // gallery.refresh();\n      makeLowScroll();\n      page += 1;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nfunction makeMarkup(dataResp) {\n  const markup = dataResp\n    .map(\n      dataEl => `<a href=${dataEl.largeImageURL} class=\"large-image\"><div class=\"photo-card\">\n  <img src=${dataEl.webformatURL} alt=${dataEl.tags} loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes</b> ${dataEl.likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views</b> ${dataEl.views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments</b> ${dataEl.comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads</b> ${dataEl.downloads}\n    </p>\n  </div>\n</div></a>`\n    )\n    .join('');\n  refGallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showLoadMore(hits, totalHits, page) {\n  if (hits.length % 40 === 0 && hits.length * page < totalHits) {\n    return refLoadMore.classList.add('load-more-visible');\n  }\n  refLoadMore.classList.remove('load-more-visible');\n\n  Notiflix.Notify.failure(\n    \"We're sorry, but you've reached the end of search results.\"\n  );\n}\n\nfunction delMarkup() {\n  refGallery.innerHTML = '';\n}\n\nfunction delLoadMore() {\n  if (refLoadMore.classList.contains('load-more-visible')) {\n    refLoadMore.classList.remove('load-more-visible');\n  }\n}\n\nfunction onClckLinkImg(evt) {\n  evt.preventDefault();\n\n  gallery = new SimpleLightbox('.gallery a');\n}\n\nfunction makeLowScroll() {\n  const { height } = refGallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","PARAMS","axios","fetchFotos","query","page","data","refForm","refGallery","refLoadMore","searchQuery","onSubmit","onClckloadMore","onClckLinkImg","evt","delMarkup","delLoadMore","hits","totalHits","showLoadMore","makeMarkup","error","makeLowScroll","dataResp","markup","dataEl","SimpleLightbox","height"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EACJ,uEACFC,EAAM,SAAS,QAAU,2BACzBA,EAAM,SAAS,QAAQ,KAAK,cAAc,EAAI,mBAE9C,SAASC,EAAWC,EAAOC,EAAM,CAC/B,OAAOH,EACJ,IAAI,QAAQF,CAAO,MAAMI,CAAK,GAAGH,CAAM,SAASI,CAAI,EAAE,EACtD,KAAK,CAAC,CAAE,KAAAC,CAAM,IAAKA,CAAI,CAC5B,CCRA,MAAMC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAc,KACdL,EAAO,EAGXE,EAAQ,iBAAiB,SAAUI,CAAQ,EAC3CF,EAAY,iBAAiB,QAASG,CAAc,EACpDJ,EAAW,iBAAiB,QAASK,CAAa,EAElD,SAASF,EAASG,EAAK,CASrB,GARAA,EAAI,eAAc,EAElBJ,EADaI,EAAI,OACE,SAAS,YAAY,MACxCT,EAAO,EAEPU,IACAC,IAEIN,IAAgB,GAAI,CACtB,SAAS,OAAO,QAAQ,gCAAgC,EACxD,MACD,CAEDP,EAAWO,EAAaL,CAAI,EACzB,KAAK,CAAC,CAAE,KAAAY,EAAM,UAAAC,KAAgB,CAC7B,GAAID,EAAK,SAAW,EAAG,CACrB,SAAS,OAAO,QACd,0EACV,EACQ,MACD,CAEDE,EAAaF,EAAMC,EAAWb,CAAI,EAClCe,EAAWH,CAAI,EAEfZ,GAAQ,CACd,CAAK,EACA,MAAMgB,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CAEA,SAAST,GAAiB,CACxBT,EAAWO,EAAaL,CAAI,EACzB,KAAK,CAAC,CAAE,KAAAY,EAAM,UAAAC,KAAgB,CAC7BC,EAAaF,EAAMC,EAAWb,CAAI,EAClCe,EAAWH,CAAI,EAEfK,IACAjB,GAAQ,CACd,CAAK,EACA,MAAMgB,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CAEA,SAASD,EAAWG,EAAU,CAC5B,MAAMC,EAASD,EACZ,IACCE,GAAU,WAAWA,EAAO,aAAa;AAAA,aAClCA,EAAO,YAAY,QAAQA,EAAO,IAAI;AAAA;AAAA;AAAA,qBAG9BA,EAAO,KAAK;AAAA;AAAA;AAAA,qBAGZA,EAAO,KAAK;AAAA;AAAA;AAAA,wBAGTA,EAAO,QAAQ;AAAA;AAAA;AAAA,yBAGdA,EAAO,SAAS;AAAA;AAAA;AAAA,WAIpC,EACA,KAAK,EAAE,EACVjB,EAAW,mBAAmB,YAAagB,CAAM,CACnD,CAEA,SAASL,EAAaF,EAAMC,EAAWb,EAAM,CAC3C,GAAIY,EAAK,OAAS,KAAO,GAAKA,EAAK,OAASZ,EAAOa,EACjD,OAAOT,EAAY,UAAU,IAAI,mBAAmB,EAEtDA,EAAY,UAAU,OAAO,mBAAmB,EAEhD,SAAS,OAAO,QACd,4DACJ,CACA,CAEA,SAASM,GAAY,CACnBP,EAAW,UAAY,EACzB,CAEA,SAASQ,GAAc,CACjBP,EAAY,UAAU,SAAS,mBAAmB,GACpDA,EAAY,UAAU,OAAO,mBAAmB,CAEpD,CAEA,SAASI,EAAcC,EAAK,CAC1BA,EAAI,eAAc,EAER,IAAIY,EAAe,YAAY,CAC3C,CAEA,SAASJ,GAAgB,CACvB,KAAM,CAAE,OAAAK,CAAQ,EAAGnB,EAAW,kBAAkB,sBAAqB,EAErE,OAAO,SAAS,CACd,IAAKmB,EAAS,EACd,SAAU,QACd,CAAG,CACH"}