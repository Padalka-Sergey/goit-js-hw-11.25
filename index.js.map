{"version":3,"file":"index.js","sources":["../src/js/image-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '31316386-df3d7a07dab36b9800dfb8d2b';\nconst PARAMS =\n  '&image_type=photo&orientation=horisontal&savesearch=true&per_page=40';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n\nfunction fetchFotos(query, page) {\n  return axios\n    .get(`?key=${API_KEY}&q=${query}${PARAMS}&page=${page}`)\n    .then(({ data }) => data);\n  // .catch(error => {\n  //   console.log(error);\n  //   console.log('ОШИБКА');\n  // });\n}\n\nexport { fetchFotos };\n","import { fetchFotos } from './image-api';\n\nconst refForm = document.querySelector('#search-form');\nconst refGallery = document.querySelector('.gallery');\nconst refLoadMore = document.querySelector('.load-more');\nlet searchQuery = null;\nlet page = 1;\n\nrefForm.addEventListener('submit', onSubmit);\nrefLoadMore.addEventListener('click', onClckloadMore);\n\nfunction onSubmit(evt) {\n  evt.preventDefault();\n  const form = evt.target;\n  searchQuery = form.elements.searchQuery.value;\n  if (searchQuery === '') {\n    return console.log('Please fill in all the fields!');\n  }\n\n  fetchFotos(searchQuery, page)\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        return console.log(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n      }\n\n      showLoadMore(hits, totalHits, page);\n      makeMarkup(hits);\n      page += 1;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nfunction makeMarkup(dataResp) {\n  const markup = dataResp\n    .map(\n      dataEl => `<div class=\"photo-card\">\n  <img src=${dataEl.webformatURL} alt=${dataEl.tags} loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes ${dataEl.likes}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Views ${dataEl.views}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments ${dataEl.comments}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads ${dataEl.downloads}</b>\n    </p>\n  </div>\n</div>`\n    )\n    .join('');\n  refGallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onClckloadMore() {\n  fetchFotos(searchQuery, page)\n    .then(({ hits, totalHits }) => {\n      showLoadMore(hits, totalHits, page);\n      makeMarkup(hits);\n      page += 1;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nfunction showLoadMore(hits, totalHits, page) {\n  console.log(page);\n  console.log(hits.length * page);\n  console.log(totalHits);\n  if (hits.length % 40 === 0 && hits.length * page < totalHits) {\n    console.log('Первый иф');\n    // console.log(' Второй иф');\n    return refLoadMore.classList.add('load-more-visible');\n  }\n  if (hits.length * page >= totalHits - 40) {\n    // console.log('Первый иф');\n    console.log('Второй иф');\n    return refLoadMore.classList.remove('load-more-visible');\n  }\n  //   refLoadMore.classList.remove('load-more-visible');\n  //   console.log('Третий');\n}\n"],"names":["API_KEY","PARAMS","axios","fetchFotos","query","page","data","refForm","refGallery","refLoadMore","searchQuery","onSubmit","onClckloadMore","evt","hits","totalHits","showLoadMore","makeMarkup","error","dataResp","markup","dataEl"],"mappings":"svBAEA,MAAMA,EAAU,qCACVC,EACJ,uEACFC,EAAM,SAAS,QAAU,2BACzBA,EAAM,SAAS,QAAQ,KAAK,cAAc,EAAI,mBAE9C,SAASC,EAAWC,EAAOC,EAAM,CAC/B,OAAOH,EACJ,IAAI,QAAQF,CAAO,MAAMI,CAAK,GAAGH,CAAM,SAASI,CAAI,EAAE,EACtD,KAAK,CAAC,CAAE,KAAAC,CAAM,IAAKA,CAAI,CAK5B,CCdA,MAAMC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EAAc,KACdL,EAAO,EAEXE,EAAQ,iBAAiB,SAAUI,CAAQ,EAC3CF,EAAY,iBAAiB,QAASG,CAAc,EAEpD,SAASD,EAASE,EAAK,CAIrB,GAHAA,EAAI,eAAc,EAElBH,EADaG,EAAI,OACE,SAAS,YAAY,MACpCH,IAAgB,GAClB,OAAO,QAAQ,IAAI,gCAAgC,EAGrDP,EAAWO,EAAaL,CAAI,EACzB,KAAK,CAAC,CAAE,KAAAS,EAAM,UAAAC,KAAgB,CAC7B,GAAID,EAAK,SAAW,EAClB,OAAO,QAAQ,IACb,0EACV,EAGME,EAAaF,EAAMC,EAAWV,CAAI,EAClCY,EAAWH,CAAI,EACfT,GAAQ,CACd,CAAK,EACA,MAAMa,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CAEA,SAASD,EAAWE,EAAU,CAC5B,MAAMC,EAASD,EACZ,IACCE,GAAU;AAAA,aACHA,EAAO,YAAY,QAAQA,EAAO,IAAI;AAAA;AAAA;AAAA,iBAGlCA,EAAO,KAAK;AAAA;AAAA;AAAA,iBAGZA,EAAO,KAAK;AAAA;AAAA;AAAA,oBAGTA,EAAO,QAAQ;AAAA;AAAA;AAAA,qBAGdA,EAAO,SAAS;AAAA;AAAA;AAAA,OAIhC,EACA,KAAK,EAAE,EACVb,EAAW,mBAAmB,YAAaY,CAAM,CACnD,CAEA,SAASR,GAAiB,CACxBT,EAAWO,EAAaL,CAAI,EACzB,KAAK,CAAC,CAAE,KAAAS,EAAM,UAAAC,KAAgB,CAC7BC,EAAaF,EAAMC,EAAWV,CAAI,EAClCY,EAAWH,CAAI,EACfT,GAAQ,CACd,CAAK,EACA,MAAMa,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CAEA,SAASF,EAAaF,EAAMC,EAAWV,EAAM,CAI3C,GAHA,QAAQ,IAAIA,CAAI,EAChB,QAAQ,IAAIS,EAAK,OAAST,CAAI,EAC9B,QAAQ,IAAIU,CAAS,EACjBD,EAAK,OAAS,KAAO,GAAKA,EAAK,OAAST,EAAOU,EACjD,eAAQ,IAAI,WAAW,EAEhBN,EAAY,UAAU,IAAI,mBAAmB,EAEtD,GAAIK,EAAK,OAAST,GAAQU,EAAY,GAEpC,eAAQ,IAAI,WAAW,EAChBN,EAAY,UAAU,OAAO,mBAAmB,CAI3D"}